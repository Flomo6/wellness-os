# ADR-0001: Core Scheduling Architecture and Guardrails

## Context
We own the scheduling engine and admin UX. No marketplace. AI chat via n8n calls our REST API only. Multi-tenant isolation with RLS. High correctness and scalability.

## Decisions
- Build scheduling logic in-house. No Google Calendar bridge.
- Postgres (Supabase). Store timestamptz in UTC. Convert at API/UI using tenant_time_zone. No DST math in SQL.
- PWA-first React web app. All writes go through API (no client-side booking mutations).
- Monorepo: apps/web, apps/api, packages/shared.
- Strict RLS. Every query scoped by tenant_id. Roles: owner, admin, staff. Tenant API keys + scoped bot tokens.
- Correctness: advisory locks + SERIALIZABLE; DB-level overlap prevention.
- Exclusions: no marketplace, no 3rd-party calendar sync, no direct DB access from n8n.

## Status
Accepted.

## Consequences
- Full control over availability and rules.
- Secure tenant isolation.
- More initial work, less vendor risk.
- PWA enables fast iteration.
